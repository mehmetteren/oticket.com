{% extends "base_v2.html" %}
<!DOCTYPE html>
<html>
{% block head %}
{{super()}}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function () {
  $(".trip-list").on("click", ".trip-item .trip-details", function () {
    var $tripItem = $(this).closest(".trip-item");
    var $ticketSelection = $tripItem.find(".ticket-selection");
    var isVisible = $ticketSelection.is(":visible");
    var height = isVisible ? 0 : $ticketSelection.outerHeight(true);
    $ticketSelection.slideToggle();
    $tripItem.css("margin-bottom", height + "px");
  });
});

</script>
<script>
  function showConfirmation() {
    var confirmation = confirm("Are you sure?");
  
    if (confirmation) {
      // User clicked "OK" in the confirmation dialog
      // Perform the desired action here
      alert("Confirmed!");
    } else {
      // User clicked "Cancel" in the confirmation dialog
      // Handle the cancellation or perform alternative action here
      alert("Cancelled!");
    }
  }
  </script>

<style>
  .trip-listing {
    max-width: 1200px;
    margin: 20px auto;
    
  }

  .search-bar {
    margin-bottom: 20px;
    margin-left: 0%;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    padding: 10px;
    background-color: #f1f1f1;
    border-radius: 5px;
  }

  .search-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
  }

  .search-bar label {
    margin-right: 3px;
    font-size: 12px;
  }

  .search-bar select {
    margin-right: 37px;
    padding: 5px;
    border: none;
    border-radius: 3px;
    font-size: 12px;
  }

  .search-bar input[type="date"] {
    padding: 3px;
    border: none;
    border-radius: 3px;
    font-size: 14px;
  }

  .search-bar button[type="submit"] {
    padding: 10px;
    border: none;
    border-radius: 3px;
    border-color: #f44336;
    font-size: 14px;
    margin-left: 70px;
  }

  .search-bar button[type="submit"] {
    background-color: #4CAF50;
    color: white;
    cursor: pointer;
  }

  .sort-by {
    margin-bottom: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-end;
    align-items: center;
  }

  .sort-by label {
    margin-right: 10px;
  }

  .sort-by select {
    padding: 5px;
    border: none;
    border-radius: 3px;
    font-size: 16px;
  }

  .trip-list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .trip-item {
    margin: 0;
    position: relative;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.8s ease; /* Apply a smooth transition effect */
  }

  .trip-item:hover {
    background-color: #7fa98c76;
  }

  .trip-details {
    border-radius: 5px;
    display:flex;
    flex-wrap: wrap;
    justify-content:space-between;
    align-items:flex-end;
    width: 100%;
  }

  .trip-details > * {
    margin-right: 5%; /* Adjust the spacing between trip-company elements */
    white-space: nowrap;
    background-color: #cdcdcd67;
    padding: 5px;
    border-radius: 3px;
  }

  .trip-details > *:last-child {
    margin-right: 0px; /* Adjust the spacing between trip-company elements */
    align-self:flex-end;
  }

  .trip-company {
    font-size: 24px;
    font-weight: bold;
  }

  .trip-time {
    position: relative;
    font-size: 16px;
  }

  .trip-locations {
    font-size: 16px;
    font-weight: bold;
  }

  .trip-vehicle {
    font-size: 16px;
  }

  .trip-price {
    font-size: 20px;
    font-weight: bold;
  }

  .trip-status {
    font-size: 16px;
    padding: 5px;
    border-radius: 3px;
  }

  .trip-status.available {
    background-color: #4CAF50;
    color: white;
  }

  .trip-status.full {
    justify-content: center;
    background-color: #f44336;
    width: 60px;
    color: white;
  }

  .ticket-selection {
  align-items:center;
  justify-content:space-between;
  display: none;
  overflow: hidden;
  position: absolute;
  top: 100%;
  left: 0;
  width: 90%;
  height: 180px;
  background-color: #7fa98c3d;
  border: 1px solid #ccc;
  transition: display 0.3s ease; /* Apply a smooth transition effect */
  }

.ticket-selection.show {
  display: flex; /* Adjust the value as needed */
}

.review-button {
    background-color: #ffffffc7;
    color: #000000;
    border: thin solid #d914145e;
    border-radius: 5px;
    margin-bottom: 10px;
    margin-right: 10px;
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .review-button:hover {
    background-color: #5252527c;
  }

.ticket-selection table {
  padding: 10px;
  width: 100%;
  border:#f44336;
}

</style>
{% endblock %}
{% block content %}
<div class="trip-listing">
  <div class="search-bar"> <!-- buuuuuuuus -->
    <form method="POST" action="{{ url_for('search.search_ticket', type='bus') }}" class="form">
      <div class="select-container">
        <label for="departure_loc">Departure Location:</label>
        <select type="option" name="departure_loc" id="departure_loc">
          {% for location in locations %}
          <option value='{{location}}'>{{location}}</option>
          {% endfor %}
        </select>
        <label for="arrival-location">Arrival Location:</label>
        <select type="option" name="arrival_loc" id="arrival_loc">
          {% for location in locations %}
          <option value='{{location}}'>{{location}}</option>
          {% endfor %}
        </select>
      </div>
      <label for="date">Date:</label>
      <input type="date" id="date" name="date" value="2023-05-01">
      <button type="submit">Edit Search</button>
    </form>
  </div>
  <div class="sort-by">
    <label for="sort-by-select">Sort by:</label>
    <select id="sort-by-select" onchange="sortBy(this.value)">
      <option value="price-desc">Price (highest first)</option>
      <option value="price-asc">Price (lowest first)</option>
      <option value="departure-time-asc">Departure Time (earliest first)</option>
      <option value="departure-time-desc">Departure Time (latest first)</option>
      <option value="arrival-time-asc">Arrival Time (earliest first)</option>
      <option value="arrival-time-desc">Arrival Time (latest first)</option>
    </select>
  </div>

  <div class="trip-locations">
    <span class="departure-location">{{departure_location}}</span> - <span
      class="arrival-location">{{arrival_location}}</span>
  </div>

  <ul class="trip-list">
    {% for trip in trips %}
    <li class="trip-item">
      <div class="trip-details">
        <div class="trip-company">{{trip.company_name}}</div>
        <div class="trip-time">
          <span class="departure-time">{{trip.departure_time}}</span> -
          <span class="arrival-time">{{trip.arrival_time}}</span>
        </div>
        <div class="trip-vehicle">{{trip.year}} {{trip.model_name}}</div>
        <div class="trip-price">{{trip.price_to_show}} TL</div>
        {% if trip.status == 'Available' %}
        <div class="trip-status available">Available</div>
        {% else %}
        <div class="trip-status full">Full</div>
        {% endif %}
      </div>
      <div class="ticket-selection">
        <button class="review-button">Go to Company Reviews</button>
        <button class="review-button">Go to Vehicle Reviews</button>
        <table>
          <tr>
            <th>Class</th>
            <th>Available Seats</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <td>First Class</td>
            <td>10</td>
            <td><button onclick="showConfirmation()">Reserve One</button></td>
            <td><button onclick="showConfirmation()">Buy One</button></td>
            <td>Your balance: xxxx</td>
          </tr>
          <tr>
            <td>Business Class</td>
            <td>10</td>
            <td><button onclick="reserve('Business Class')">Reserve One</button></td>
            <td><button onclick="buy('Business Class')">Buy One</button></td>
          </tr>
          <tr>
            <td>Economy Class</td>
            <td>20</td>
            <td><button onclick="reserve('Economy Class')">Reserve One</button></td>
            <td><button onclick="buy('Economy Class')">Buy One</button></td>
            <td></td>
          </tr>
        </table>
        
      </div>
    </li>
    {% endfor %}
  </ul>
  {% endblock %}


<!--
  <ul class="trip-list">
    {% for trip in trips %}
      <li class="trip-item">
        <div class="trip-company">{{trip.company_name}}</div>
        <div class="trip-time">
          <span class="departure-time">{{trip.departure_time}}</span> - <span
            class="arrival-time">{{trip.arrival_time}}</span>
        </div>
        <div class="trip-vehicle">{{trip.year}} {{trip.model_name}}</div>
        <div class="trip-price">{{trip.price_to_show}} TL</div>
        {% if trip.status == 'Available' %}
        <div class="trip-status available">Available</div>
        {% else %}
        <div class="trip-status full">Full</div>
        {% endif %}
        <div class="ticket-selection">


        </div>
      </li>
      {% endfor %}
      
      <li class="trip-item">
        <div class="trip-company">Seyhan Turizm</div>
        <div class="trip-time">
          <span class="departure-time">10:00</span> - <span class="arrival-time">18:00</span>
        </div>
        <div class="trip-locations">
          <span class="departure-location">Ankara</span> - <span class="arrival-location">Adana</span>
        </div>
        <div class="trip-vehicle"> 2018 MERCEDES TRAVEGO</div>
        <div class="trip-price">750 TL</div>
        <div class="trip-status full">Full</div>
      </li>
      <li class="trip-item">
        <div class="trip-company">Seyhan Turizm</div>
        <div class="trip-time">
          <span class="departure-time">12:00</span> - <span class="arrival-time">20:00</span>
        </div>
        <div class="trip-locations">
          <span class="departure-location">Ankara</span> - <span class="arrival-location">Adana</span>
        </div>
        <div class="trip-vehicle">2019 MERCEDES TRAVEGO</div>
        <div class="trip-price">750 TL</div>
        <div class="trip-status available">Available</div>
      </li>
      
  </ul>-->
</div>



</html>